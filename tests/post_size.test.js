import {assert} from 'chai';
import postSize from '../public/assets/post_size.js';

describe('ะคัะฝะบัะธั ะฟัะพะฒะตัะบะธ ัะฐััะตัะฐ ัะฐะทะผะตัะฐ ะฟะพััะฐ', () => {
    it('1. ะะตะท ัััะปะพะบ', function () {
        assert.equal(12, postSize('ะัะตะผ ะฟัะธะฒะตั!'));
    });

    it('2. ะะดะฝะฐ http-ัััะปะบะฐ ะทะฐะผะตะฝัะตััั ะฝะฐ 1 ัะธะผะฒะพะป', () => {
        const text = 'ะัะธะฒะตั http://example.com ะดััะณ';
        // "ะัะธะฒะตั " (7) + 1 (ัััะปะบะฐ) + " ะดััะณ" (5) = 13
        assert.equal(13, postSize(text));
    });

    it('3. ะะดะฝะฐ https-ัััะปะบะฐ ัะพะถะต ััะธัะฐะตััั ะบะฐะบ 1 ัะธะผะฒะพะป', () => {
        const text = 'ะกะผะพััะธ: https://google.com!';
        // "ะกะผะพััะธ: " (8) + 1 (ัััะปะบะฐ) + "!" (1) = 10
        assert.equal(10, postSize(text));
    });

    it('4. ะกััะปะบะฐ ะฒ ะฝะฐัะฐะปะต ัััะพะบะธ', () => {
        const text = 'https://site.com ะัะธะฒะตั!';
        // 1 (ัััะปะบะฐ) + " ะัะธะฒะตั!" (8) = 9
        assert.equal(9, postSize(text));
    });

    it('5. ะกััะปะบะฐ ะฒ ะบะพะฝัะต ัััะพะบะธ', () => {
        const text = 'ะขะตะบัั ะฟะตัะตะด ัััะปะบะพะน http://a.com';
        // "ะขะตะบัั ะฟะตัะตะด ัััะปะบะพะน " (22) + 1 = 23
        assert.equal(21, postSize(text));
    });

    it('6. ะะตัะบะพะปัะบะพ ัััะปะพะบ โ ะบะฐะถะดะฐั ััะธัะฐะตััั ะบะฐะบ 1 ัะธะผะฒะพะป', () => {
        const text = 'ะกะผะพััะธ http://a.com ะธ https://b.com ัะตะนัะฐั';
        // "ะกะผะพััะธ " (7) + 1 + " ะธ " (3) + 1 + " ัะตะนัะฐั" (6) = 18
        assert.equal(19, postSize(text));
    });

    it('7. ะะพัั ัะพััะพะธั ัะพะปัะบะพ ะธะท ะพะดะฝะพะน ัััะปะบะธ', () => {
        const text = 'http://test.com';
        // 1 ัะธะผะฒะพะป
        assert.equal(1, postSize(text));
    });

    it('8. ะะพัั ัะพััะพะธั ะธะท ะดะฒัั ัััะปะพะบ ะฟะพะดััะด', () => {
        const text = 'http://a.com https://b.com';
        // 1 + 1 = 2
        assert.equal(3, postSize(text));
    });

    it('9. ะกััะปะบะฐ ะฑะตะท http (ะฝะฐะฟัะธะผะตั t.me)', () => {
        const text = 'ะะตัะตัะพะดะธ: t.me/somechannel';
        // "ะะตัะตัะพะดะธ: " (10) + 1 = 11
        assert.equal(11, postSize(text));
    });

    it('10. ะกะปะพะถะฝัะน ัะตะบัั ัะพ ัะฟะตััะธะผะฒะพะปะฐะผะธ ะธ ัััะปะบะพะน ะฒ ัะตัะตะดะธะฝะต', () => {
        const text = 'ะัะธะฒะตั ๐ https://vk.com/test ััะพ ัะตัั!';
        // "ะัะธะฒะตั ๐ " (9) + 1 + " ััะพ ัะตัั!" (10) = 20
        // (ััะธััะฒะฐั emoji = 2 ัะธะผะฒะพะปะฐ)
        assert.equal(20, postSize(text));
    });
})
